workspace(name = "bazel_rules_container_nodejs_example")
load("//versions:versions.bzl", "NODEJS_VERSION")

local_repository(
  name = "bazel_rules_container",
  path = __workspace_dir__ + "/../",
)

load("@bazel_rules_container//container:repositories.bzl", "container_repositories")
container_repositories()

load("@io_bazel_rules_go//go:deps.bzl", "go_rules_dependencies", "go_register_toolchains")
go_rules_dependencies()
go_register_toolchains()

load("@bazel_gazelle//:deps.bzl", "gazelle_dependencies")
gazelle_dependencies()

load("@bazel_rules_container//container:repositories_go.bzl", "container_repositories_go")
container_repositories_go()

load("@io_bazel_rules_docker//repositories:repositories.bzl", docker_repositories = "repositories")
docker_repositories()

#########

load("@io_bazel_rules_docker//docker:docker.bzl", "docker_pull")

docker_pull(
  name = "base",
  registry = "gcr.io",
  repository = "distroless/cc",
  digest = "sha256:f4dddc007e81bf9a8dfbf6a07a0db5c70292bed76dca896f7d4833f6f33eed2f",
)

load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

http_archive(
  name = "nodejs",
  url = "https://nodejs.org/dist/v" + NODEJS_VERSION + "/node-v" + NODEJS_VERSION + "-linux-x64.tar.xz",
  sha256 = "1827f5b99084740234de0c506f4dd2202a696ed60f76059696747c34339b9d48",
  build_file_content = "exports_files(['node-v" + NODEJS_VERSION + "-linux-x64'])",
)
